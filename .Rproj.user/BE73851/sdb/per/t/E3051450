{
    "collab_server" : "",
    "contents" : "---\ntitle: \"StormData_How Flood and Tornados are the most Harmful Disastors\"\nsynopsis: \"The data is from the National Weather Service. It consits of data on property, crop damages, as well as fatalities and injuries from natural disastors in the United States. First, the pertinent data was pulled from the data sets, grouped by event types, imputed if necessary, and then sorted. Finally, the losses were summed, and then graphed to see which events lead to the highest losses.\"\nauthor: \"Anuj Shah\"\ndate: \"November 1, 2018\"\noutput: html_document\n\n---\n## Loading Data and Libraries\n```{r setup, include=FALSE}\nlibrary(dplyr)\nlibrary(ggplot2)\nlibrary(knitr)\nStormData <- read.csv(\"StormData\")\nhead(StormData)\n```\n## Data Processing - Q1: Which Types of Events are most harmful to population health?\n```{r dataprocessing1}\nStormData_df <- tbl_df(StormData) #transform to df for dplyr ops\n#Across the United States, which types of events (as indicated in the EVTYPE variable) are most harmful with respect to population health?\nSDby_EV <- group_by(StormData_df, EVTYPE)    #group all same EV rows\nSDby_EV_sum <- mutate(SDby_EV, total_aff = FATALITIES + INJURIES) #add a variable for total health_loss\nSDby_EV_mod <- select(SDby_EV_sum,EVTYPE, FATALITIES, INJURIES, total_aff) #Pull out the columns we need,like EVTYPE, FATALITIES, INJURIES\nSDby_EV_sorted <- summarize(SDby_EV_mod, health_loss = sum(total_aff)) #gives just total healthloss for each EVTYPE\n```\n\nNow we need to pull out top 10 disastors and sort for Health Loss\n\n```{r dataprocessing2}\n##A method to get top 1% disastor events by health_loss, happens to yield top 10 disastors\nquantile(SDby_EV_sorted$health_loss, probs = 0.99) #Finds top 1% amount for total health loss\nTop_Ten1 <- filter(SDby_EV_sorted, health_loss > 1400) #Yields top 1% events with most health losses, in this case greater than 1400\nTop_Ten1 <- arrange(Top_Ten1, desc(health_loss)) #Sort in desc order\n```\n\nFinding the top 1% shows that these values will be above 1400 people affected.\n\n## Data Processing - Q2: Across the United States, which types of events have the greatest economic consequences?\n```{r pt2dataprocessing1}\n#Across the United States, which types of events have the greatest economic consequences?\nSD_ECL <- select(StormData_df, EVTYPE, PROPDMG, PROPDMGEXP, CROPDMG, CROPDMGEXP)#Pull out necessary variables\nSD_ECL$PROPDMGEXP <- as.character(SD_ECL$PROPDMGEXP)#change type to make it easier to subsitute data\nSD_ECL$CROPDMGEXP <- as.character(SD_ECL$CROPDMGEXP)\n\n#Subsitute necessary values into EXP columns for Properties and Crops\nSD_ECL$PROPDMGEXP[(SD_ECL$PROPDMGEXP == \"\")] <- 0\nSD_ECL$PROPDMGEXP[(SD_ECL$PROPDMGEXP == \"+\") | (SD_ECL$PROPDMGEXP == \"-\") | (SD_ECL$PROPDMGEXP == \"?\")] <- 1\nSD_ECL$PROPDMGEXP[(SD_ECL$PROPDMGEXP == \"h\") | (SD_ECL$PROPDMGEXP == \"H\")] <- 2\nSD_ECL$PROPDMGEXP[(SD_ECL$PROPDMGEXP == \"k\") | (SD_ECL$PROPDMGEXP == \"K\")] <- 3\nSD_ECL$PROPDMGEXP[(SD_ECL$PROPDMGEXP == \"m\") | (SD_ECL$PROPDMGEXP == \"M\")] <- 6\nSD_ECL$PROPDMGEXP[(SD_ECL$PROPDMGEXP == \"b\") | (SD_ECL$PROPDMGEXP == \"B\")] <- 9\n\nSD_ECL$CROPDMGEXP[(SD_ECL$CROPDMGEXP == \"\")] <- 0\nSD_ECL$CROPDMGEXP[(SD_ECL$CROPDMGEXP == \"+\") | (SD_ECL$CROPDMGEXP == \"-\") | (SD_ECL$CROPDMGEXP == \"?\")] <- 1\nSD_ECL$CROPDMGEXP[(SD_ECL$CROPDMGEXP == \"h\") | (SD_ECL$CROPDMGEXP == \"H\")] <- 2\nSD_ECL$CROPDMGEXP[(SD_ECL$CROPDMGEXP == \"k\") | (SD_ECL$CROPDMGEXP == \"K\")] <- 3\nSD_ECL$CROPDMGEXP[(SD_ECL$CROPDMGEXP == \"m\") | (SD_ECL$CROPDMGEXP ==  \"M\")] <- 6\nSD_ECL$CROPDMGEXP[(SD_ECL$PROPDMGEXP == \"b\") | (SD_ECL$CROPDMGEXP == \"B\")] <- 9\n\n# Convert to integers for exponentiation \nSD_ECL$PROPDMGEXP <- as.integer(SD_ECL$PROPDMGEXP)\nSD_ECL$CROPDMGEXP <- as.integer(SD_ECL$CROPDMGEXP)\n\nSD_ECL$PROPDMG <- SD_ECL$PROPDMG * 10^SD_ECL$PROPDMGEXP # Multiplying to get true magnitude\nSD_ECL$CROPDMG <- SD_ECL$CROPDMG * 10^SD_ECL$CROPDMGEXP\n```\n\nNow we need to transform the data as necessary to find top 10 economic loss inducing disastors. \n\n```{r pt2dataprocessing2}\nSD_ECL <- group_by(SD_ECL, EVTYPE)\nSD_ECL_sum <- mutate(SD_ECL, SUM = PROPDMG + CROPDMG)\nSD_ECL_sum <- summarize(SD_ECL_sum, PropLoss = sum(SUM))\nSD_ECL_sum <- arrange(SD_ECL_sum, desc(PropLoss))\nTop_TenPL <- head(SD_ECL_sum,10)\n```\n\n\n## Results\n```{r health_lossPlot}\nggplot(Top_Ten1, aes(x=EVTYPE, y=health_loss)) + geom_bar(stat=\"identity\")\n```\n\nThe greatest health loss results from Tornados.\n\n```{r economic_lossPlot}\nggplot(Top_TenPL, aes(x=EVTYPE, y=PropLoss)) + geom_bar(stat=\"identity\")\n```\n\nThe greatest economic loss results from Flooding. \n\n\n",
    "created" : 1541123439480.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "452565594",
    "id" : "E3051450",
    "lastKnownWriteTime" : 1541126142,
    "last_content_update" : 1541126142935,
    "path" : "C:/Users/heman/Google Drive/School Stuff/Coursera/Data Science Specialization/5. Reproducible Research/Week 4/Project 2/RRPeerAssignment2.Rmd",
    "project_path" : "RRPeerAssignment2.Rmd",
    "properties" : {
        "last_setup_crc32" : "FFACD3D2b8b781e3",
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}